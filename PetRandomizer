-- üì¶ SERVICES
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")

-- üìå REFERENCES
local player = Players.LocalPlayer
local gui = player:WaitForChild("PlayerGui")
local eggPart = Workspace:WaitForChild("Egg")

-- üß± Billboard ESP
local billboard = Instance.new("BillboardGui", eggPart)
billboard.Name = "EggESP"
billboard.Adornee = eggPart
billboard.Size = UDim2.new(0, 200, 0, 50)
billboard.StudsOffset = Vector3.new(0, 3, 0)
billboard.AlwaysOnTop = true
billboard.Enabled = false

local label = Instance.new("TextLabel", billboard)
label.Size = UDim2.new(1, 0, 1, 0)
label.BackgroundTransparency = 1
label.TextColor3 = Color3.new(1, 1, 1)
label.TextScaled = true
label.Font = Enum.Font.Arcade
label.Text = ""

-- üñ•Ô∏è GUI
local screen = Instance.new("ScreenGui", gui)
screen.Name = "EggRandomizerGUI"

local frame = Instance.new("Frame", screen)
frame.Size = UDim2.new(0, 300, 0, 120)
frame.Position = UDim2.new(0, 60, 0, 60)
frame.BackgroundColor3 = Color3.fromRGB(120, 80, 40)
frame.Draggable = true
frame.Active = true

local header = Instance.new("Frame", frame)
header.Size = UDim2.new(1, 0, 0, 30)
header.BackgroundColor3 = Color3.fromRGB(120, 170, 80)

local title = Instance.new("TextLabel", header)
title.Size = UDim2.new(1, -40, 1, 0)
title.Position = UDim2.new(0, 10, 0, 0)
title.Text = "üê£ Randomizer"
title.TextXAlignment = Enum.TextXAlignment.Left
title.Font = Enum.Font.Arcade
title.TextColor3 = Color3.new(1, 1, 1)
title.TextSize = 18
title.BackgroundTransparency = 1

-- üß≤ MINIMIZE
local minimize = Instance.new("TextButton", header)
minimize.Text = "-"
minimize.Size = UDim2.new(0, 30, 0, 25)
minimize.Position = UDim2.new(1, -35, 0, 2)
minimize.Font = Enum.Font.Arcade
minimize.BackgroundColor3 = Color3.fromRGB(210, 60, 60)
minimize.TextColor3 = Color3.new(1, 1, 1)

local miniFrame = Instance.new("TextButton", screen)
miniFrame.Size = UDim2.new(0, 150, 0, 30)
miniFrame.Position = frame.Position
miniFrame.Text = "EggRandomizer"
miniFrame.Visible = false
miniFrame.BackgroundColor3 = Color3.fromRGB(120, 170, 80)
miniFrame.Font = Enum.Font.Arcade
miniFrame.TextColor3 = Color3.new(1, 1, 1)
miniFrame.TextSize = 16

minimize.MouseButton1Click:Connect(function()
	frame.Visible = false
	miniFrame.Visible = true
end)

miniFrame.MouseButton1Click:Connect(function()
	frame.Visible = true
	miniFrame.Visible = false
end)

-- üîÑ ESP TOGGLE
local esp = Instance.new("TextButton", frame)
esp.Text = "[A] ESP Egg: OFF"
esp.Size = UDim2.new(1, -20, 0, 40)
esp.Position = UDim2.new(0, 10, 0, 35)
esp.Font = Enum.Font.Arcade
esp.TextColor3 = Color3.new(1, 1, 1)
esp.BackgroundColor3 = Color3.fromRGB(210, 60, 60)

local espOn = false
esp.MouseButton1Click:Connect(function()
	espOn = not espOn
	label.Text = ""
	billboard.Enabled = espOn
	esp.Text = "[A] ESP Egg: " .. (espOn and "ON" or "OFF")
end)

-- üé≤ PETS
local pets = {"Tarantula Hawk", "Killer Wasp", "Hornet Queen", "Red Bee", "Sting Mantis"}

-- üéÆ REROLL
local reroll = Instance.new("TextButton", frame)
reroll.Text = "[B] Reroll Pet"
reroll.Size = UDim2.new(1, -20, 0, 40)
reroll.Position = UDim2.new(0, 10, 0, 80)
reroll.Font = Enum.Font.Arcade
reroll.TextColor3 = Color3.new(1, 1, 1)
reroll.BackgroundColor3 = Color3.fromRGB(100, 150, 255)

reroll.MouseButton1Click:Connect(function()
	local petName = pets[math.random(1, #pets)]
	if espOn then
		label.Text = "Anti Bee Egg | " .. petName
	end

	-- Crack FX
	local crack = Instance.new("ParticleEmitter")
	crack.Texture = "rbxassetid://243660364"
	crack.Lifetime = NumberRange.new(0.5)
	crack.Speed = NumberRange.new(1)
	crack.Rate = 100
	crack.Parent = eggPart

	task.delay(0.6, function()
		crack:Destroy()

		local models = ReplicatedStorage:FindFirstChild("PetModels")
		if models and models:FindFirstChild(petName) then
			local pet = models[petName]:Clone()
			pet:SetPrimaryPartCFrame(eggPart.CFrame + Vector3.new(0, 2, 0))
			pet.Parent = Workspace
		else
			warn("Missing pet model: " .. petName)
		end
	end)
end)
